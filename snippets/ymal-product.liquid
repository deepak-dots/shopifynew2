{%- assign ymal_product_count = product.metafields.ymal | size -%}
{%- assign shown_products = 0 -%}
{%- if ymal_product_count > 0 -%}
  <div class="more-product d-block clearfix">
    <div class="container">
      <div class="row no-gutters">
        <div class="col-12 col-sm-12 text-center"><h3>{{'products.ymal.title' | t }}</h3></div>
        <div class="col-12 col-sm-12 col-md-8 m-auto">
          <div class="row">
            {%- for ymal in product.metafields.ymal -%}
            {%- assign yproduct = all_products[ymal.last] -%}
            {%- if yproduct.handle == current_product.handle -%}
            {%- assign current_product_found = true -%}
            {%- else -%}
              {%- if yproduct != empty -%}
              <div class="col-6 col-sm-6 col-md-6">
                <!-- {{ yproduct | JSON }}-->
                {%- include 'product-card-grid', product: yproduct, max_height: 600 -%}
                {%- increment shown_products -%}
              </div>
              {%- endif -%}
            {%- endif -%}
            {%- endfor -%}
          </div>
        </div>
      </div>
      </div>
  </div>
{%- if shown_products == 0 -%}<style>.more-product .container{ display:none; }</style>{% endif%}
{%- endif -%}
